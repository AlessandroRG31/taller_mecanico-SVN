{% extends 'core/base.html' %}
{% load static %}

{% block extra_head %}
  {# Select2 CSS y JS + jQuery para autocompletar cliente #}
  <link
    href="https://cdn.jsdelivr.net/npm/select2@4.1.0/dist/css/select2.min.css"
    rel="stylesheet"
  />
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script
    src="https://cdn.jsdelivr.net/npm/select2@4.1.0/dist/js/select2.min.js"
  ></script>
{% endblock %}

{% block title %}Nuevo Vehículo{% endblock %}

{% block content %}
  <h2>Nuevo Vehículo</h2>
  <form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    {{ form.non_field_errors }}

    <div class="form-group">
      {{ form.cliente.label_tag }}
      {{ form.cliente }}
      {{ form.cliente.errors }}
    </div>
    <div class="form-group">
      {{ form.placa.label_tag }}
      {{ form.placa }}
      {{ form.placa.errors }}
    </div>
    <div class="form-group">
      {{ form.marca.label_tag }}
      {{ form.marca }}
      {{ form.marca.errors }}
    </div>
    <div class="form-group">
      {{ form.modelo.label_tag }}
      {{ form.modelo }}
      {{ form.modelo.errors }}
    </div>
    <div class="form-group">
      {{ form.anio.label_tag }}
      {{ form.anio }}
      {{ form.anio.errors }}
    </div>
    <div class="form-group">
      {{ form.tipo.label_tag }}
      {{ form.tipo }}
      {{ form.tipo.errors }}
    </div>
    <div class="form-group">
      {{ form.costo.label_tag }}
      {{ form.costo }}
      {{ form.costo.errors }}
    </div>
    <div class="form-group">
      {{ form.foto_frente.label_tag }}
      {{ form.foto_frente }}
      {{ form.foto_frente.errors }}
    </div>
    <div class="form-group">
      {{ form.foto_trasera.label_tag }}
      {{ form.foto_trasera }}
      {{ form.foto_trasera.errors }}
    </div>
    <div class="form-group">
      {{ form.foto_lateral1.label_tag }}
      {{ form.foto_lateral1 }}
      {{ form.foto_lateral1.errors }}
    </div>
    <div class="form-group">
      {{ form.foto_lateral2.label_tag }}
      {{ form.foto_lateral2 }}
      {{ form.foto_lateral2.errors }}
    </div>
    <div class="form-group">
      {{ form.fecha_proxima_revision.label_tag }}
      {{ form.fecha_proxima_revision }}
      {{ form.fecha_proxima_revision.errors }}
    </div>

    <button type="submit" class="btn btn-primary">Guardar</button>
  </form>
{% endblock %}

{% block extra_js %}
  <script>
    $(document).ready(function() {
      $('#id_cliente').select2({
        placeholder: 'Seleccione un cliente',
        allowClear: true,
        width: '100%'
      });
    });
  </script>
{% endblock %}
